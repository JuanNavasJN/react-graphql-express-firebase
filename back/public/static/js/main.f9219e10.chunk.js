(this.webpackJsonp8base=this.webpackJsonp8base||[]).push([[0],{44:function(e,t,n){e.exports=n(61)},49:function(e,t,n){},56:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(35),o=n.n(c),l=(n(49),n(4)),i=n(16),u=n(17),s=n(7),d=n(14),m=n(15),b=n.n(m);function p(){var e=Object(d.a)(["\n    mutation RemoveUserTodo($id: ID!, $user: String!) {\n        removeUserTodo(id: $id, user: $user) {\n            id\n        }\n    }\n"]);return p=function(){return e},e}function f(){var e=Object(d.a)(["\n    mutation AddUserToTodo($id: ID!, $user: String!) {\n        addUserToTodo(id: $id, user: $user) {\n            id\n        }\n    }\n"]);return f=function(){return e},e}function v(){var e=Object(d.a)(["\n    mutation TodoDelete($id: ID!) {\n        todoDelete(filter: { id: $id }) {\n            success\n        }\n    }\n"]);return v=function(){return e},e}function h(){var e=Object(d.a)(["\n    mutation TodoToggle($id: ID!, $completed: Boolean!) {\n        todoUpdate(filter: { id: $id }, data: { completed: $completed }) {\n            id\n            text\n            completed\n        }\n    }\n"]);return h=function(){return e},e}function j(){var e=Object(d.a)(["\n    mutation TodoCreate($data: TodoCreateInput!) {\n        todoCreate(data: $data) {\n            id\n            text\n            completed\n        }\n    }\n"]);return j=function(){return e},e}function O(){var e=Object(d.a)(["\n    mutation addUser($data: UserInput!) {\n        addUser(data: $data) {\n            id\n        }\n    }\n"]);return O=function(){return e},e}function E(){var e=Object(d.a)(["\n    query GetUser($id: ID, $email: String, $password: String) {\n        user(id: $id, email: $email, password: $password) {\n            id\n            logged\n        }\n    }\n"]);return E=function(){return e},e}function g(){var e=Object(d.a)(["\n    query Users {\n        users {\n            name\n        }\n    }\n"]);return g=function(){return e},e}function w(){var e=Object(d.a)(["\n    query TodoList {\n        todosList(orderBy: [completed_ASC, createdAt_DESC]) {\n            items {\n                id\n                text\n                completed\n                users\n            }\n        }\n    }\n"]);return w=function(){return e},e}var y=b()(w()),k=b()(g()),N=b()(E()),$=b()(O()),x=b()(j()),S=b()(h()),C=b()(v()),T=b()(f()),U=b()(p()),A=function(e){var t=Object(s.c)(y).data,n=Object(a.useState)([]),c=Object(l.a)(n,2),o=c[0],d=c[1];return Object(u.h)(),Object(a.useEffect)((function(e){t&&t.todosList.items.length>=0&&d(t.todosList.items)}),[t]),o.length?r.a.createElement("footer",{className:"footer"},r.a.createElement("span",{className:"todo-count"},r.a.createElement("strong",null,"0")," item left"),r.a.createElement("ul",{className:"filters"},r.a.createElement("li",null,r.a.createElement(i.b,{className:"/"===window.location.pathname?"selected":void 0,to:"/"},"All")),r.a.createElement("li",null,r.a.createElement(i.b,{className:"/active"===window.location.pathname?"selected":void 0,to:"/active"},"Active")),r.a.createElement("li",null,r.a.createElement(i.b,{className:"/completed"===window.location.pathname?"completed":void 0,to:"/completed"},"Completed"))),r.a.createElement("button",{className:"clear-completed"},"Clear completed")):null},q=(n(56),function(e){var t=Object(a.useState)({text:""}),n=Object(l.a)(t,2),c=n[0],o=n[1],i=Object(s.b)(x),u=Object(l.a)(i,1)[0];return r.a.createElement("header",{className:"header"},r.a.createElement("h1",null,"todos"),r.a.createElement("input",{className:"new-todo",onChange:function(e){var t=e.target;return o({text:t.value})},onKeyPress:function(e){if("Enter"===e.key){var t=c.text;u({variables:{data:{text:t,completed:!1}},refetchQueries:[{query:y}]}),o({text:""})}},value:c.text,placeholder:"What needs to be done?"}))}),D=n(19),I=n.n(D),L=n(27);function Q(e){var t=e.todo,n=e.toggleModal,a=Object(s.b)(C),c=Object(l.a)(a,1)[0],o=Object(s.b)(S),i=Object(l.a)(o,1)[0],u=Object(s.b)(U),d=Object(l.a)(u,1)[0];return r.a.createElement("li",{key:t.id,className:t.completed?"completed":void 0},r.a.createElement("div",{className:"view"},r.a.createElement("input",{className:"toggle",onChange:function(){return i({variables:{id:t.id,completed:!t.completed},refetchQueries:[{query:y}]})},checked:t.completed,type:"checkbox"}),r.a.createElement("label",null,t.text),r.a.createElement("button",{onClick:function(){return c({variables:{id:t.id},refetchQueries:[{query:y}]})},className:"destroy"}),r.a.createElement("button",{className:"add-user",onClick:function(e){return n(t.id)}},"+"),r.a.createElement("ul",{className:"users"},t.users&&t.users.map((function(e,n){return r.a.createElement("li",{className:"user",onClick:function(n){return a=e,void d({variables:{id:t.id,user:a},refetchQueries:[{query:y}]});var a},key:n},e.split("")[0].toUpperCase(),r.a.createElement("span",{className:"tooltiptext"},e))})))))}var B=function(e){var t=Object(s.c)(y),n=t.data,c=t.loading,o=Object(s.c)(k).data,i=Object(s.b)(S),d=Object(l.a)(i,1)[0],m=Object(s.b)(T),b=Object(l.a)(m,1)[0],p=Object(a.useState)([]),f=Object(l.a)(p,2),v=f[0],h=f[1],j=Object(a.useState)(!1),O=Object(l.a)(j,2),E=O[0],g=O[1],w=Object(a.useState)([]),N=Object(l.a)(w,2),$=N[0],x=N[1],C=Object(a.useState)(""),U=Object(l.a)(C,2),A=U[0],q=U[1];Object(a.useEffect)((function(e){o&&o.users&&x(o.users)}),[o]),Object(u.h)(),Object(a.useEffect)((function(e){n&&n.todosList.items.length>=0&&h(n.todosList.items)}),[n]);var D=function(e){var t=e.completed;v.forEach((function(e){d({variables:{id:e.id,completed:t},refetchQueries:[{query:y}]})}))},B=function(e){g(!E),"string"===typeof e&&q(e)},F=function(){var e=Object(L.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.innerText,b({variables:{id:A,user:n},refetchQueries:[{query:y}]}),B();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c?r.a.createElement("h4",null," Loading ..."):v&&v.length?r.a.createElement("section",{className:"main"},E&&r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-body"},r.a.createElement("span",{className:"modal-close",onClick:B},"X"),r.a.createElement("ul",null,$.map((function(e){return r.a.createElement("li",{onClick:F,key:e.name},e.name)}))))),r.a.createElement("input",{className:"toggle-all",type:"checkbox",onChange:function(){return v.some((function(e){return!1===e.completed}))?D({completed:!0}):D({completed:!1})},checked:!1}),r.a.createElement("label",{htmlFor:"toggle-all"},"Mark all as complete"),r.a.createElement("ul",{className:"todo-list"},v.filter((function(e){return"/completed"===window.location.pathname?e.completed:"/active"!==window.location.pathname||!e.completed})).map((function(e){return r.a.createElement(Q,{key:e.id,todo:e,toggleModal:B})})))):null},F=n(20);n(58);n(59);var M=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],o=n[1];return r.a.createElement(i.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/login",component:function(e){return function(e){var t=e.setAuth,n=e.isAuth,c=Object(u.g)(),o=Object(a.useState)(""),i=Object(l.a)(o,2),d=i[0],m=i[1],b=Object(a.useState)([]),p=Object(l.a)(b,2),f=p[0],v=p[1],h=Object(a.useState)(!1),j=Object(l.a)(h,2),O=j[0],E=j[1],g=Object(a.useState)(""),w=Object(l.a)(g,2),y=w[0],k=w[1],x=Object(a.useState)(void 0),S=Object(l.a)(x,2),C=S[0],T=S[1],U=Object(a.useState)(void 0),A=Object(l.a)(U,2),q=A[0],D=A[1],Q=Object(s.a)(N,{variables:{email:d,password:q}}),B=Object(l.a)(Q,2),M=B[0],P=B[1].data,W=Object(s.b)($),_=Object(l.a)(W,1)[0];Object(a.useEffect)((function(e){n&&c.push("/")}),[n]),Object(a.useEffect)((function(e){P&&null===P.user&&E(!0),P&&P.user&&!0===P.user.logged?t(!0):P&&P.user&&!1===P.user.logged&&(f.push("Incorrect password"),v(Object(F.a)(f)))}),[P]),Object(a.useEffect)((function(e){v([])}),[d,C,y]);var z=function(){var e=Object(L.a)(I.a.mark((function e(n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!(f.length>0)){e.next=4;break}return v([]),e.abrupt("return");case 4:if(void 0===C&&(f.push("Password empty"),v(Object(F.a)(f))),O&&""===y&&(f.push("Full name empty"),v(Object(F.a)(f))),0!==f.length){e.next=17;break}if(!O){e.next=15;break}return console.log("new user"),e.next=11,_({variables:{data:{name:y,email:d,password:C}}});case 11:e.sent.data.addUser.id&&(console.log("user registered"),t(!0)),e.next=17;break;case 15:D(C),M();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login"},r.a.createElement("form",{onSubmit:z},r.a.createElement("input",{type:"email",placeholder:"Email",onBlur:function(e){""===d?(f.push("Email empty"),v(Object(F.a)(f))):/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(String(d).toLowerCase())?(v([]),M()):(f.push("Email format invalid"),v(Object(F.a)(f)))},onChange:function(e){return m(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"Password",onChange:function(e){return T(e.target.value)}}),O&&r.a.createElement("input",{type:"text",placeholder:"Full name",onChange:function(e){return k(e.target.value)}}),f.length>0?r.a.createElement("div",{className:"messages"},f.map((function(e,t){return r.a.createElement("p",{key:t},e)}))):null,r.a.createElement("button",{type:"submit"},"Login"))))}({isAuth:c,setAuth:o})}}),c?r.a.createElement(u.b,{path:"/",component:function(e){return r.a.createElement("div",{className:"todoapp"},r.a.createElement(q,null),r.a.createElement(B,null),r.a.createElement(A,null))}}):r.a.createElement(u.a,{to:"/login"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=n(18),W=n(42),_=n(43),z=n(9),J=new W.a,Z=new _.a({uri:"http://localhost:8080/graphql"}),G=new P.a({cache:J,link:Z});o.a.render(r.a.createElement(z.a,{client:G},r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.f9219e10.chunk.js.map